---
import "../../styles/global.css";
import LayoutWithHero from "../../layouts/LayoutWithHero.astro";
import myImage from "../../assets/hero_page/hero_infos.webp";
import Paragraphe from "../../components/Paragraphe.astro";
import France from "../../assets/lieux/infos-pratiques_carte-france.webp";
import Caroussel1 from "../../assets/lieux/infos-pratiques_parc-img1.webp";
import Caroussel2 from "../../assets/lieux/infos-pratiques_parc-img2.webp";
import Caroussel3 from "../../assets/lieux/infos-pratiques_parc-img3.webp";
import FAQ from "../../components/Faq.astro";

import { getInvite } from "../../../Backend/backend.mjs";
const invite = await getInvite();

const title = "Infos pratiques";
const heroAlt = "Image Hero de la page invité";
---

<LayoutWithHero title={title} heroImage={myImage} heroAlt={heroAlt}>
    <div slot="chapo" class="grid px-4 md:px-6 lg:px-8">
        <p class="text-base md:text-lg lg:text-xl">
            Organisez votre venue au festival de Bavilliers ! Accès, hébergements,
            lieux et infos pratiques : tout ce qu'il faut pour profiter d'un événement
            100 % gratuit.
        </p>
    </div>
    <div class="px-4 md:px-6 lg:px-8" slot="content">
        <Paragraphe
            subtitle="Accessibilité pour tous"
            description="Entrée : 100 % gratuitePour participer, il vous suffit de remplir un formulaire d'inscription disponible sur notre site ou directement à l'entrée du festival."
        />
    </div>
    <div slot="content" class="px-4 md:px-6 lg:px-8">
        <Paragraphe
            subtitle="Un cadre naturel au parc de la Douce"
            description=`Le festival "Ça va trai'ler" se tiendra au parc de la Douce, un écrin de verdure à Belfort, offrant un cadre idéal pour célébrer le trail running en plein air, au plus près de la nature.`
        />
        <img src={France.src} alt="Carte de la France" class="w-full h-auto my-4" />
        <div class="w-full overflow-hidden">
            <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2688.780103181923!2d6.834470599999999!3d47.6304056!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47923c7d58b56a03%3A0x4685f1b0576de9c2!2sParc%20de%20la%20Douce!5e0!3m2!1sfr!2sfr!4v1741859765579!5m2!1sfr!2sfr"
                class="w-full h-[250px] md:h-[350px] lg:h-[450px]"
                style="border:0;"
                allowfullscreen=""
                loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>
        <div class="carousel relative w-full overflow-hidden my-6">
            <div
                class="carousel-container flex transition-transform duration-500 ease-in-out"
            >
                <div class="carousel-slide min-w-full">
                    <img
                        src={Caroussel1.src}
                        alt="Image carousel 1"
                        class="w-full h-48 md:h-56 lg:h-64 object-cover"
                    />
                </div>
                <div class="carousel-slide min-w-full">
                    <img
                        src={Caroussel2.src}
                        alt="Image carousel 2"
                        class="w-full h-48 md:h-56 lg:h-64 object-cover"
                    />
                </div>
                <div class="carousel-slide min-w-full">
                    <img
                        src={Caroussel3.src}
                        alt="Image carousel 3"
                        class="w-full h-48 md:h-56 lg:h-64 object-cover"
                    />
                </div>
            </div>
            <button
                class="carousel-arrow carousel-prev absolute inset-y-0 left-0 flex items-center justify-center w-8 md:w-10 h-full bg-gray-200 bg-opacity-50 hover:bg-opacity-70"
            >
                <svg
                    class="w-4 h-4 md:w-6 md:h-6 text-gray-800"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg"
                    ><path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M15 19l-7-7 7-7"></path></svg
                >
            </button>
            <button
                class="carousel-arrow carousel-next absolute inset-y-0 right-0 flex items-center justify-center w-8 md:w-10 h-full bg-gray-200 bg-opacity-50 hover:bg-opacity-70"
            >
                <svg
                    class="w-4 h-4 md:w-6 md:h-6 text-gray-800"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg"
                    ><path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M9 5l7 7-7 7"></path></svg
                >
            </button>
        </div>
        <div class="mt-8">
            <Paragraphe
                subtitle="Hébergements"
                description=`Hôtels proches :
                Brit Hotel Belfort Centre  : à 30 minutes à pied, à partir de 50 €/nuit
                Hotel Novotel Belfort Centre Atria : à 44 minutes en voiture, à partir de 70 €/nuit

                Camping :
                Camping de l'Étang des Forges - Nature et Familial

                Autres options :
                Airbnb et gîtes disponibles dans les environs.`
            />
        </div>
        <div class="mt-8">
            <Paragraphe
                subtitle="Transports"
                description=`Accès :
                En train : Gare de Belfort, à 10 minutes en voiture de Bavilliers.
                En voiture : Suivez la sortie "Bavilliers Centre" depuis l'A36.
                Covoiturage : Consultez notre page dédiée au partage de trajets.

                Parkings :
                Parking Principal : Gratuit (200 places disponibles).
                Parking Secondaire : Gratuit (150 places, à 5 min à pied).`
            />
        </div>
        <div class="mt-8">
            <FAQ/>
        </div>
    </div>
</LayoutWithHero>

<script>
    const handleResize = () => {
        const container = document.querySelector(".carousel-container");
        const slides = document.querySelectorAll(".carousel-slide");
        const slideWidth = container.clientWidth;
        
        // Reset position when window is resized
        container.style.transform = `translateX(0)`;
        currentIndex = 0;
        
        // Update slide widths
        slides.forEach((slide) => {
            slide.style.minWidth = `${slideWidth}px`;
        });
    };

    document.addEventListener("DOMContentLoaded", () => {
        const container = document.querySelector(".carousel-container");
        const prevButton = document.querySelector(".carousel-prev");
        const nextButton = document.querySelector(".carousel-next");
        const slides = document.querySelectorAll(".carousel-slide");
        let slideWidth = container.clientWidth;
        let currentIndex = 0;

        // Set initial widths
        slides.forEach((slide) => {
            slide.style.minWidth = `${slideWidth}px`;
        });

        const updateCarousel = (index) => {
            currentIndex = index;
            slideWidth = container.clientWidth; // Recalculate in case of resize
            container.style.transform = `translateX(-${index * slideWidth}px)`;
        };

        prevButton.addEventListener("click", () => {
            const newIndex = (currentIndex - 1 + 3) % 3; // 3 is the number of slides
            updateCarousel(newIndex);
        });

        nextButton.addEventListener("click", () => {
            const newIndex = (currentIndex + 1) % 3; // 3 is the number of slides
            updateCarousel(newIndex);
        });

        // Handle window resize
        window.addEventListener("resize", handleResize);
    });
</script>
